---
layout: post
title:  "Браузерный плагин к 1Password v7"
date:   2024-01-05 00:00:00 -0400
categories: [code]
---

Сто лет пользовался 1Password, выбирал его исключительно в standalone-варианте. Когда у четвёртой версии отвалился браузерный плагин, я несколько загрустил, так как Agilebits забили на Windows, но потом они одумались и выпустили v7, в которой был и standalone и Windows.

Однако, разработчики решили, что так они всех денег не заработают и нужно срочно переходить на подписочную модель. Чтож... standalonе-версий больше не будет: [*1Password 7 will be the last version of 1Password to support standalone vaults*](https://1password.community/discussion/129161/the-future-of-local-standalone-vaults).

При запуске 1Password начал угрожать, что из-за политик Chrome скоро перестанет работать браузерный плагин, и назойливо предлагал оформить подписку. Наступил 2023... и всё. Плагин отвалился - стал показывать дурацкий диалог при старте браузера и ничего не делать. Но пришёл 2024, и что-то меня осенило - manifest v2 ведь всё ещё поддерживается. И, вероятно, что ограничение запуска чисто искусственное, а, значит, всё зашито в браузерный экстеншен и можно попробовать его раскрутить.

Начал было копать кишочки, но оказалось, что рецепт намного проще: нужно просто использовать 834 сборку.

Скачать её можно тут: [https://app-updates.agilebits.com/product_history/OPW6](https://app-updates.agilebits.com/product_history/OPW6)

- Удалить установленную 1Password версии 7.9.835
- Установить свежескачанную 7.9.834
- В настройках запретить устанавливать обновления

Официальный плагин для браузера взять тут: [https://app-updates.agilebits.com/product_history/OPX4](https://app-updates.agilebits.com/product_history/OPX4)

- Скачать
- Переименовать в `.zip` вместо `.crx`
- Распаковать в какую-нибудь папку
- (опционально) В файле `manifest.json` удалить строку `,"update_url":"https://cdn.agilebits.com/dist/1P/ext/autoupdate_chrome4.xml"`
- В Chrome в панели "Extensions" включить "Developer mode" - появится пункт "Load unpacked"
- Кликнуть в "Load unpacked", выбрать папку, в которую распаковали

Расширение загрузится и не будет приставать по поводу устаревшего манифеста. О старом манифесте будет написано в панели `Errors` возле кнопок управления плагином, но всё будет работать.

В июне 2024 начнётся тестовое выпиливание v2 из Chrome, но [если включить хитрый флажок, можно прожить со старым манифестом до июня 2025 года](https://chromeenterprise.google/policies/#ExtensionManifestV2Availability)

А там, глядишь, и можно будет вдумчиво плагин переколбасить или свалить на какую-нибудь альтернативную приблуду.
