---
layout: post
title:  "Код в фильмах: Ночной дозор"
date:   2023-03-15 00:00:00 -0400
categories: [movie, code]
---

В фильме "Ночной дозор", примерно на 46 минуте, работник "Горсвета" втыкает в досье на Светлану. А в это время слева под фотографией ползёт фрагмент кода

![](/images/night-watch-46.webp)

Качество не фонтан, но разобрать кое-что можно. Как-то примерно так:

```
-- line more horizontal than vertical
else
(
 p = 2 * dy - dx
    const2 = 2 * (dy - dx)
    const1 = 2 * dy
  while xb != x2 do
(
    xb = xb + xsign
        if  p < 0 then ( p = p + const1 )
 else 
 ( p = p + const2
  yb = yb + ysign
 )
 setPixels bmp [xb, yb] ary
```

Это же [алгоритм Брезенхэма](https://ru.wikipedia.org/wiki/%D0%90%D0%BB%D0%B3%D0%BE%D1%80%D0%B8%D1%82%D0%BC_%D0%91%D1%80%D0%B5%D0%B7%D0%B5%D0%BD%D1%85%D1%8D%D0%BC%D0%B0) для рисования прямой.

А язык, на котором написан этот фрагмент - это [MAXScript](https://ru.wikipedia.org/wiki/MAXScript) - встроенный в `3ds max` язык программирования.

Фрагмент на экране - это один, из прилагаемых к `3ds`, обучающих примеров.

Видимо, в сцене нужен был какой-то кусок кода, для таинственности, а так как под рукой был `3ds`, на котором рендерили часть графики в фильме, художники, не сильно парясь, взяли фрагмент из прилагающегося к пакету туториала и воткнули в фильм.
